=== Project Tree ===
¾í Data(F) µÄÎÄ¼ş¼Ğ PATH ÁĞ±í
¾íĞòÁĞºÅÎª 1002-88B1
F:.
|   App.vue
|   export-code.bat
|   main.ts
|   ProjectTree.txt
|   
+---assets
|   +---scripts
|   |       App.js
|   |       
|   \---styles
|           App.css
|           bot_test.css
|           
+---components
+---pages
|       about_ourselves.vue
|       bot_test.vue
|       history.vue
|       home.vue
|       send.png
|       
+---router
|       index.ts
|       
\---store
        history.ts
        
 
 
===== F:\somethingForWeb\Vue\Vue3\src\main.ts ===== 
import { createApp } from "vue";
// å¼•å…¥createAppç”¨äºåˆ›å»ºåº”ç”¨
import App from './App.vue'
// å¼•å…¥Appæ ¹ç»„ä»¶
// å¼•å…¥è·¯ç”±å™¨
import router from "./router";
// å¼•å…¥pinia
import { createPinia } from "pinia";


const app = createApp(App)
// åˆ›å»ºæ•´ä¸ªåº”ç”¨
const pinia = createPinia()

app.use(pinia)
app.use(router)
app.mount('#app')
// åˆ›å»ºè·¯ç”±ç¯å¢ƒï¼Œå¹¶æŒ‚è½½æ•´ä¸ªåº”ç”¨åˆ°appå®¹å™¨ä¸­ 
===== F:\somethingForWeb\Vue\Vue3\src\App.vue ===== 
<template>
    <!-- å¯¼èˆªåŒº -->

    <div class="forRobort">

    <nav class="sidebar">
        <ul class="nav-list">
            <!-- å•ç‹¬æ‹å‡ºâ€œæˆ‘çš„ä¸»é¡µâ€ -->
            <li class="nav-item" id="nav-logo" :class="{ active: currentRoute === '/home' }" @click="setActiveLink('/home')">
                <RouterLink  replace :to="{path:'/home'}">
                    <div class="icon">
                        <div class="image-box">
                            <img src="../public/å¤´åƒ.png" alt="My Home">
                        </div>
                    </div>
                </RouterLink>
            </li>

            <li
                v-for="item in navItems"
                :key="item.path"
                class="nav-item"
                :class="{ active: currentRoute === item.path }"
                @click="setActiveLink(item.path)"
            >
                <RouterLink replace :to="{path:item.path}">
                    <div class="icon">
                        <div v-if="item.image" class="image-box">
                            <img :src="item.image" alt="">
                        </div>
                    </div>
                </RouterLink>
            </li>            
            <hr>
        
            <label class="theme-switch">
                <span class="sun" v-if="!isDarkMode">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <g fill="#4f6f57">
                            <circle r="5" cy="12" cx="12"></circle>
                            <path d="m21 13h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm-17 0h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm13.66-5.66a1 1 0 0 1 -.66-.29 1 1 0 0 1 0-1.41l.71-.71a1 1 0 1 1 1.41 1.41l-.71.71a1 1 0 0 1 -.75.29zm-12.02 12.02a1 1 0 0 1 -.71-.29 1 1 0 0 1 0-1.41l.71-.66a1 1 0 0 1 1.41 1.41l-.71.71a1 1 0 0 1 -.7.24zm6.36-14.36a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm0 17a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm-5.66-14.66a1 1 0 0 1 -.7-.29l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.29zm12.02 12.02a1 1 0 0 1 -.7-.29l-.66-.71a1 1 0 0 1 1.36-1.36l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.24z"></path>
                        </g>
                    </svg>
                </span>

                <span class="moon" v-if="isDarkMode">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                        <g fill="#fafff9">
                        <path d="m223.5 32c-123.5 0-223.5 100.3-223.5 224s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9 0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path>
                        </g>
                    </svg>
                </span>

                <input type="checkbox" class="theme-input" v-model="isDarkMode">
            </label>
        </ul>
    </nav>

    <!-- å³ä¾§ç»¿è‰²è¾¹æ  -->

    <!-- å±•ç¤ºåŒº -->
    <div class="main-content">
        <RouterView></RouterView>
    </div>

</div>


</template>

<script lang="ts" setup name="App">
import { RouterView, RouterLink,useRoute } from 'vue-router';
import { ref, watch, onMounted } from 'vue';

// å®šä¹‰å½“å‰è·¯ç”±è·¯å¾„
const route = useRoute();
const currentRoute = ref(route.path);

// å®šä¹‰å¯¼èˆªé¡¹æ•°æ®
const navItems = [
    { path: '/', text: 'å›åˆ°é¦–é¡µ', image: '/DeepSeek-r1.jpg' },
    { path: '/bot_test', text: 'åˆ›å»ºæ–°çš„èŠå¤©', icon: 'iconfont icon-cangku' },
    { path: '/History', text: 'å†å²è®°å½•', icon: 'iconfont icon-zhuti_tiaosepan' },
    { path: '/About_ourselves', text: 'å…³äºæˆ‘ä»¬', icon: 'iconfont icon-tupian' }
];

// ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œæ›´æ–°å½“å‰æ¿€æ´»çš„å¯¼èˆªé¡¹
watch(() => route.path, (newPath) => {
    currentRoute.value = newPath;
});

// ç‚¹å‡»å¯¼èˆªé¡¹æ—¶è®¾ç½®å½“å‰æ¿€æ´»çš„å¯¼èˆªé¡¹
function setActiveLink(path: string) {
    currentRoute.value = path;
}

// ä¸»é¢˜åˆ‡æ¢é€»è¾‘
const isDarkMode = ref(localStorage.getItem('theme') === 'dark');

// ç›‘å¬ä¸»é¢˜åˆ‡æ¢
watch(isDarkMode, (newVal) => {
    if (newVal) {
        document.body.classList.add('dark-theme');
        localStorage.setItem('theme', 'dark');
    } else {
        document.body.classList.remove('dark-theme');
        localStorage.setItem('theme', 'light');
    }
});

// åˆå§‹åŒ–ä¸»é¢˜
onMounted(() => {
    if (isDarkMode.value) {
        document.body.classList.add('dark-theme');
    }
});
</script>

<style>
    @import url("../src/assets/styles/App.css");
</style> 
===== F:\somethingForWeb\Vue\Vue3\src\assets\scripts\App.js ===== 
 
===== F:\somethingForWeb\Vue\Vue3\src\pages\about_ourselves.vue ===== 
<template>

</template>

<script>
</script>

<style>
</style> 
===== F:\somethingForWeb\Vue\Vue3\src\pages\bot_test.vue ===== 
<template>
  <div class="chat-container">

    <div class="chat-box">
      <ul class="message-list" ref="messageList">
        <li
          class="message-item"
          v-for="(message, index) in messages"
          :key="index"
          :class="message.type === 'user' ? 'text-right' : 'text-left'"
        >

          <div class="message-content">
            <!-- æ€è€ƒå†…å®¹ -->
            <div
              v-if="message.type === 'bot' && message.think && showThink"
              class="think"
            >
              {{ message.think }}
            </div>

            <!-- æ‰“å­—æœºæ•ˆæœçš„åŠ¨æ€æ–‡æœ¬ -->
            <div class="dynamic-text">
              <span v-html="message.displayText"></span>
            </div>
          </div>

        </li>
      </ul>
    </div>

    <div class="chat-input">
      <input
        type="text"
        id="chat-input"
        placeholder="è¾“å…¥æ¶ˆæ¯å¹¶æŒ‰Enteré”®å‘é€"
        v-model="userInput"
        @keydown.enter="sendMessage"
      />
      <button @click="sendMessage">å‘é€</button>
    </div>
    <!-- åˆ‡æ¢æ€è€ƒå†…å®¹æ˜¾ç¤ºçš„æŒ‰é’® -->
    <button
      class="toggle-think-button"
      @click="toggleThinkContent"
    >
      {{ showThink ? "éšè—æ€è€ƒå†…å®¹" : "æ˜¾ç¤ºæ€è€ƒå†…å®¹" }}
    </button>

  </div>
</template>

<script>
export default {
  data() {
    return {
      userInput: "",
      messages: [],
      showThink: false,
    };
  },
  methods: {
    async sendMessage() {
      const inputText = this.userInput.trim();
      if (!inputText) {
        alert("è¯·è¾“å…¥å†…å®¹ï¼");
        return;
      }

      // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
      this.messages.push({
        type: "user",
        displayText: inputText,
      });
      this.userInput = "";

      // æ·»åŠ åŠ è½½çŠ¶æ€çš„æ¶ˆæ¯
      this.messages.push({
        type: "bot",
        displayText: "æ­£åœ¨æ€è€ƒ...",
        think: "æ­£åœ¨æ€è€ƒ...",
      });

      // æ»šåŠ¨åˆ°åº•éƒ¨
      this.scrollToBottom();

      try {
        // è°ƒç”¨Ollamaæ¥å£
        const botResponse = await this.getBotResponse(inputText);

        // æ›¿æ¢åŠ è½½çŠ¶æ€çš„æ¶ˆæ¯ä¸ºå®é™…å›å¤
        const lastMessageIndex = this.messages.length - 1;
        this.messages[lastMessageIndex] = {
          type: "bot",
          displayText: botResponse.text,
          think: botResponse.think,
        };

        // æ¨¡æ‹Ÿæ‰“å­—æœºæ•ˆæœ
        this.typeWriterEffect(
          lastMessageIndex,
          botResponse.text,
          "displayText",
          botResponse.think
        );
      } catch (error) {
        console.error("è·å–å›ç­”æ—¶å‡ºé”™:", error);
        const lastMessageIndex = this.messages.length - 1;
        this.messages[lastMessageIndex] = {
          type: "bot",
          displayText: "æŠ±æ­‰ï¼Œæˆ‘æ— æ³•å›ç­”ä½ çš„é—®é¢˜ã€‚",
        };
      }

      // æ»šåŠ¨åˆ°åº•éƒ¨
      this.scrollToBottom();
    },
    async getBotResponse(prompt) {
      try {
        const response = await fetch("http://localhost:11434/api/generate", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            model: "my_ds_for_test/deepseek-r1", // ç¡®ä¿æ¨¡å‹åç§°æ­£ç¡®
            prompt: prompt,
            stream: false,
          }),
        });

        if (!response.ok) {
          throw new Error("ç½‘ç»œè¯·æ±‚å¤±è´¥");
        }

        const data = await response.json();
        const botResponse = data.response;

        // è§£æ <think> æ ‡ç­¾å†…å®¹
        const { thinkContent, finalText } = this.extractThinkContent(botResponse);

        return {
          text: finalText,
          think: thinkContent,
        };
      } catch (error) {
        throw error;
      }
    },
    extractThinkContent(response) {
      const thinkRegex = /<think>(.*?)<\/think>/s;
      const match = response.match(thinkRegex);

      if (match) {
        const thinkContent = match[1].trim();
        const finalText = response.replace(thinkRegex, "").trim();
        return { thinkContent, finalText };
      } else {
        return { thinkContent: "", finalText: response };
      }
    },
    typeWriterEffect(index, text, field, thinkText) {
  let dynamicText = "";
  const speed = 5; // æ‰“å­—é€Ÿåº¦ï¼ˆæ¯«ç§’ï¼‰

  const intervalId = setInterval(() => {
    if (dynamicText.length < text.length) {
      dynamicText += text.charAt(dynamicText.length);
      this.messages[index][field] = dynamicText; // ç›´æ¥èµ‹å€¼å³å¯
      if (thinkText && this.showThink) {
        this.messages[index].think = dynamicText;
      }
    } else {
      clearInterval(intervalId);
    }
    this.scrollToBottom();
  }, speed);
},
    scrollToBottom() {
      const messageList = this.$refs.messageList;
      messageList.scrollTop = messageList.scrollHeight;
    },
    toggleThinkContent() {
      this.showThink = !this.showThink;
    },
  },
  mounted() {
    this.scrollToBottom();
  },
};
</script>

<style scoped>
  @import url("../assets/styles/bot_test.css");
</style> 
===== F:\somethingForWeb\Vue\Vue3\src\pages\history.vue ===== 
<template>

</template>

<script>
</script>

<style>
</style> 
===== F:\somethingForWeb\Vue\Vue3\src\pages\home.vue ===== 
<template>
    <!-- <div class="user_picture">
        <img src="ç”¨æˆ·å¤´åƒï¼Œä»æ•°æ®åº“è°ƒå–" alt="">
    </div> -->
</template>

<script set ip lang = 'ts' name = 'home'>
</script>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    list-style: none;
    text-decoration: none;
}
</style> 
===== F:\somethingForWeb\Vue\Vue3\src\router\index.ts ===== 
// åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨ï¼Œå¹¶æš´éœ²å‡ºå»

// ç¬¬ä¸€æ­¥ï¼šå¼•å…¥createrRouter
import { createRouter,createWebHashHistory,createWebHistory } from 'vue-router';
// import { routes } from "vue-router/auto-routes";
// å¼•å…¥å¯èƒ½è¦ä½¿ç”¨çš„ç»„ä»¶
import home from '@/pages/home.vue';
import bot_test from "@/pages/bot_test.vue";
import about_ourselves from "@/pages/about_ourselves.vue";
import history from "@/pages/history.vue";


// ç¬¬äºŒæ­¥ï¼šåˆ›å»ºè·¯ç”±å™¨
const router = createRouter({
    history:createWebHashHistory(),
    // historyæ¨¡å¼çš„è·¯å¾„æ›´åŠ ç¾è§‚ï¼Œæ²¡æœ‰#çš„å­˜åœ¨ï¼Œæ›´æ¥è¿‘ä¼ ç»Ÿçš„url
    // hashæ¨¡å¼æ›´åŠ ç¨³å¦¥ï¼Œç¾è§‚æˆ‘ä»¬ä¸care
    routes:[
        {name:'firstPage',path:'/home',component:home,},
        {name:'secondPage',path:'/Bot_test',component:bot_test},
        {name:'thirdPage',path:'/About_ourselves',component:about_ourselves},
        {name:'forthPage',path:'/History',component:history},
        {path:"/",redirect:"/home"}
        // é‡å®šå‘ï¼Œè®©æŒ‡å®šçš„è·¯å¾„é‡å®šå‘åˆ°å¦ä¸€ä¸ªè·¯å¾„
    ]
})

export default router 
===== F:\somethingForWeb\Vue\Vue3\src\store\history.ts ===== 
import { defineStore } from "pinia";
// å®šä¹‰ä¸€ä¸ªä»“åº“

